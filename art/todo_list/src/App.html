<script>

	import Navbar from './components/Navbar.html';
	import AddTask from './components/Form/AddTask.html';
	import List from './components/List.html';
	$: tasks = [
	
		{
			category: "Work",
			todo: "todo 1",
			completed: false,
			date: new Date() 
		},
		{
			category: "Home",
			todo: "todo 2", 
			completed: true,
			date: new Date()
		},
		{
			category: "Hobbies",
			todo: "todo 3", 
			completed: false,
			date: new Date()
		},
	]
	$: filteredTasks =  tasks.filter(t =>  t.completed === false)
	let active = false

	const handleSubmit = (event) => {

		if (event.detail.wesh === "") {
			
			alert("Please add a task")

		} else {

			const newTodo = {
				
				category: event.detail.cate,
				todo: event.detail.wesh,
				completed: false,
				date: new Date()
			
			}

			tasks = [...tasks, newTodo]
		
		}

	}

	const handleDelete = (task) => {
		
		tasks = tasks.filter(t => t !== task.detail.task)
	
	}

	const allTasks = () => {
		
		active = !active
		filteredTasks =  tasks.filter(t =>  t.completed === false)

	}

</script>

<!-- fin du script -->

<Navbar />

<AddTask on:submit={handleSubmit}/>

<div class="flex justify-between">
	<List tasks={active ? filteredTasks : tasks} category="Work" on:delete={handleDelete} />
	<List tasks={active ? filteredTasks : tasks} category="Hobbies" on:delete={handleDelete} />
	<List tasks={active ? filteredTasks : tasks} category="Home" on:delete={handleDelete} />
</div>

<button on:click={allTasks}>See all {active ? "all" : "uncompleted"} task</button>